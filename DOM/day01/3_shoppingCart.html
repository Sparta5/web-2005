<!DOCTYPE HTML>
<html>
<head>
<title>使用Selector API实现购物车客户端计算</title>
<meta charset="utf-8" />
<style>
	table{width:600px; text-align:center;
		border-collapse:collapse;
	}
	td,th{border:1px solid black}
	td[colspan="3"]{text-align:right;}
</style>

</head>
<body>
	<table id="data">
		<thead>
			<tr>
				<th>商品名称</th>
				<th>单价</th>
				<th>数量</th>
				<th>小计</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>iPhone6</td>
				<td>¥4488.00</td>
        <td>
          <button>-</button>
          <span>1</span>
          <button>+</button>
        </td>
				<td>¥4488.00</td>
			</tr>
			<tr>
				<td>iPhone6 plus</td>
				<td>¥5288.00</td>
				<td>
          <button>-</button>
          <span>1</span>
          <button>+</button>
				</td>
				<td>¥5288.00</td>
			</tr>
			<tr>
				<td>iPad Air 2</td>
				<td>¥4288.00</td>
        <td>
          <button>-</button>
          <span>1</span>
          <button>+</button>
        </td>
				<td>¥4288.00</td>
			</tr>
		</tbody>
		<tfoot>
			<tr>
				<td colspan="3">Total: </td>
				<td>¥14064.00</td>
			</tr>
		</tfoot>
	</table>
	<script>
		//1. 点击+/-号，修改数量
		//DOM4步:
		//1.1 查找触发事件的元素: 
		//1.1.1 先查找table
		var table=document.getElementById("data");
		//1.1.2找table下所有的button
		var btns=table.getElementsByTagName("button");
		//1.2 为触发事件的元素绑定事件处理函数
		//一边遍历，一边为每个按钮绑定事件处理函数
		for(var btn of btns){
			btn.onclick=function(){
		//1.3 查找要修改的元素
		//本例中查找当前按钮的爹的第二个孩子
		var span=this.parentElement.children[1];
		// span.style.color="red";
		//1.4 修改元素:
		//1.4.1先取出span的内容，因为接下来要做算数计算，保险起见必须转为数字
		var n=parseInt(span.innerHTML);
		if(this.innerHTML=="+"){
					n++;
				}else if(n>1){
					n--;
				}
				//1.4.3将新的n再放回sapn的内容中
				span.innerHTML=n;
				
			}
		}
	</script>
</body>
</html>
