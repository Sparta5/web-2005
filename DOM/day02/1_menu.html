<!DOCTYPE HTML>
<html>
<head>
<title>1. 实现伸缩二级菜单</title>
<meta charset="utf-8" />
<style>
	li{
	list-style:none;
}
li span{
	padding-left: 20px;
	cursor: pointer;
  background: url("./images/add.png") no-repeat center left;
}
li ul{
	/* display: none;  */
	height: 0;
	overflow: hidden;
	transition: all .5s linear;
}
.open{ background: url("./images/minus.png") no-repeat center left; }
/* .open+ul{  */
	/* display: block; */
	/* height: 108px; */
/* } */
li:nth-child(1)>span.open+ul{
	height: 66px;
}
li:nth-child(2)>span.open+ul{
	height: 88px;
}
li:nth-child(3)>span.open+ul{
	height: 102px;
}
</style>
</head>
<body>
	<ul class="tree">
		<li>
			<span class="open">考勤管理</span>
			<ul>
				<li>日常考勤</li>
				<li>请假申请</li>
				<li>加班/出差</li>
			</ul>
		</li>
		<li><span>信息中心</span>
			<ul>
				<li>通知公告</li>
				<li>公司新闻</li>
				<li>规章制度</li>
				<li>规章制度</li>
			</ul>
		</li>
		<li><span>协同办公</span>
			<ul>
				<li>公文流转</li>
				<li>文件中心</li>
				<li>内部邮件</li>
				<li>即时通信</li>
				<li>短信提醒</li>
			</ul>
		</li>
	</ul>
  <script>
		//DOM 4部
		//1.查找触发事件的函数
		//本例中查找所有li下的span，可能多个所有加All
		var spans=document.querySelectorAll("li>span");
		//2.绑定触发事件的函数
		//为每个span添加事件
		for(var span of spans){
			span.onclick=function(){
				//测试：让当前按钮变成❀
				// this.innerHTML="❀"
			//3.查找要修改的元素
			//把当前触发事件的span存在变量里，因为多次使用
			var thisSpan=this;
			//查找另一个class为open的元素,只可能有一个所以不用全部查找
			var otherSpan=document.querySelector("span.open");
			//判断如果当前span的class有open，则另一个(otherSpan)设为null;如果同时打开就会有冲突
			//解决必须将另一个otherSpan设置为null，表示没有找到
			if(thisSpan==otherSpan){
				 otherSpan=null;
			 }
			 //4.修改元素
			 //如果当前(class为open)打开,则设置当前(clss移除open)
			 if(thisSpan.className=="open"){
				 thisSpan.className="";
			 }else{
				 thisSpan.className="open"
			 }
			 //添加后让其他的元素为移除open关闭
			 if( otherSpan!==null ){
				 otherSpan.className=""
			 }
			}
		}
	</script>
</body>
</html>
