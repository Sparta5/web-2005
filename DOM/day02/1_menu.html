<!DOCTYPE HTML>
<html>
<head>
<title>1. 实现伸缩二级菜单</title>
<meta charset="utf-8" />
<link rel="stylesheet" href="css/1.css" />

</head>
<body>
	<ul class="tree">
		<li>
			<span class="open">考勤管理</span>
			<ul>
				<li>日常考勤</li>
				<li>请假申请</li>
				<li>加班/出差</li>
			</ul>
		</li>
		<li><span>信息中心</span>
			<ul>
				<li>通知公告</li>
				<li>公司新闻</li>
				<li>规章制度</li>
			</ul>
		</li>
		<li><span>协同办公</span>
			<ul>
				<li>公文流转</li>
				<li>文件中心</li>
				<li>内部邮件</li>
				<li>即时通信</li>
				<li>短信提醒</li>
			</ul>
		</li>
	</ul>
  <script>
		//DOM 4步
		var spans=document.querySelectorAll("li>span");
		for(var key of spans){
			key.onclick=function(){
				// this.innerHTML="❀";
			//通过this获得当前点击的span
			var thisSpan=this;
			//查找另一个class为open的span
			var otherSpan=document.querySelector("span.open");
			//问题: 如果本次点的thisSpan，刚好也是一个打开的span，则thisSpan和otherSpan就成了同一个，如果往后写，就会发生错误~！
				//解决: 如果otherSpan==当前span，我们就认为没找到另一个开着的span！就可将otherSpan设置为null，表示没找到另一个！
			if(otherSpan==thisSpan){
				otherSpan=null;
				}
			//4. 修改元素: 
				//本例中: 
				//如果当前span是开着的(class为open)，则关闭当前span，否则如果当前span是关着的，就打开当前span(设置class为open)
				if(thisSpan.className=="open"){
					thisSpan.className="";
				}else{
					thisSpan.className="open";
				}
				//另一个开着的span，注定要关上！（清除class）
				//问题: 如果单击按钮时所有span都是关着的，则找不到另一个开着的otherSpan，则什么也不需要做！
				//只有找到了另一个开着的span时，才有必要关闭另一个span
			if(otherSpan!=null){
				otherSpan.className="";
			}
			}
		}
	</script>
</body>
</html>
